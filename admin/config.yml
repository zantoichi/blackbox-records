local_backend: true

backend:
  name: github
  repo: zantoichi/blackbox-records
  branch: main
  base_url: https://api.netlify.com
  auth_endpoint: auth

commit_messages:
  create: "feat(content): create {{collection}}/{{slug}}"
  update: "chore(content): update {{collection}}/{{slug}}"
  delete: "chore(content): delete {{collection}}/{{slug}}"
  uploadMedia: "chore(media): upload {{path}}"
  deleteMedia: "chore(media): delete {{path}}"
  openAuthoring: "chore(content): open {{collection}}/{{slug}}"

media_folder: "assets/images/uploads"
public_folder: "/assets/images/uploads"

collections:
  - name: home_content
    label: Home Page
    files:
      - name: home
        label: Home Sections
        file: _data/home.yml
        fields:
          - label: Hero
            name: hero
            widget: object
            fields:
              - { label: Tagline, name: tagline, widget: text }
              - { label: Primary Button Text, name: primary_button_text, widget: string }
              - { label: Primary Button Link, name: primary_button_link, widget: string }
              - { label: Secondary Button Text, name: secondary_button_text, widget: string }
              - { label: Secondary Button Link, name: secondary_button_link, widget: string }
          - label: Latest Releases
            name: latest_releases
            widget: object
            fields:
              - { label: Section Label, name: section_label, widget: string }
              - { label: Title, name: title, widget: string }
              - { label: Link Text, name: link_text, widget: string }
              - { label: Link URL, name: link_url, widget: string }
          - label: Artists Section
            name: artists
            widget: object
            fields:
              - { label: Section Label, name: section_label, widget: string }
              - { label: Title, name: title, widget: string }
              - { label: Button Text, name: button_text, widget: string }
              - { label: Button Link, name: button_link, widget: string }
          - label: News Section
            name: news
            widget: object
            fields:
              - { label: Section Label, name: section_label, widget: string }
              - { label: Title, name: title, widget: string }
              - { label: Link Text, name: link_text, widget: string }
              - { label: Link URL, name: link_url, widget: string }
          - label: Journey Section
            name: journey
            widget: object
            fields:
              - { label: Section Label, name: section_label, widget: string }
              - { label: Title, name: title, widget: string }
              - label: Image
                name: image
                widget: image
                media_folder: "/assets/images/backgrounds"
                public_folder: "/assets/images/backgrounds"
              - { label: Image Description, name: image_alt, widget: string, required: false }
              - label: Paragraphs
                name: paragraphs
                widget: list
                field: { label: Paragraph, name: paragraph, widget: text }
              - label: Stats
                name: stats
                widget: list
                fields:
                  - label: Type
                    name: key
                    widget: select
                    options:
                      - { label: Artists (auto), value: artists }
                      - { label: Releases (auto), value: releases }
                      - { label: Countries (auto), value: countries }
                      - { label: Year (auto), value: year }
                      - { label: Custom (manual), value: custom }
                  - { label: Value, name: value, widget: string, required: false }
                  - { label: Label, name: label, widget: string }
  - name: shop_link
    label: Shop Link
    files:
      - name: shop
        label: Shop Redirect
        file: shop/index.md
        fields:
          - { label: Redirect URL, name: redirect_url, widget: string, hint: "Where the Shop page sends visitors." }
  - name: releases
    label: Releases
    label_singular: Release
    folder: _releases
    create: true
    slug: "{{slug}}"
    summary: "{{title}}"
    fields:
      - { label: Layout, name: layout, widget: hidden, default: release }       
      - { label: Title, name: title, widget: string }
      - label: Artist (from roster)
        name: artist_slug
        widget: relation
        collection: artists
        search_fields: ["title", "slug"]
        display_fields: ["title"]
        value_field: "slug"
        hint: "Select an artist from the roster."
      - { label: Release Date, name: release_date, widget: datetime, format: "YYYY-MM-DD", time_format: false, hint: "Date only (YYYY-MM-DD)." }
      - label: Cover Image
        name: cover_image
        widget: image
        media_folder: "/assets/images/releases"
        public_folder: "/assets/images/releases"
      - { label: Cover Description, name: cover_image_alt, widget: string, required: false }
      - label: Merch Collection URL (Fourthwall)
        name: merch_url
        widget: string
        required: false
        hint: "Optional. Use a Fourthwall collection or product URL."
      - label: Bandcamp Player Embed URL
        name: bandcamp_embed_url
        widget: string
        required: false
        hint: "Paste the Bandcamp embed src URL (from the iframe). Instructions: https://get.bandcamp.help/hc/en-us/articles/23020711574423-How-do-I-create-a-Bandcamp-embedded-player"
        pattern:
          [
            "^https?://bandcamp\\.com/EmbeddedPlayer/.*",
            "Use the Bandcamp embed src URL (https://bandcamp.com/EmbeddedPlayer/...)."
          ]
      - label: Tidal Player Embed URL
        name: tidal_url
        widget: string
        required: false
        hint: "Paste the Tidal embed src URL (from the iframe). Instructions: https://developer.tidal.com/documentation/embeds/embeds-overview"
        pattern:
          [
            "^https?://embed\\.tidal\\.com/.*",
            "Use the Tidal embed src URL (https://embed.tidal.com/...)."
          ]
      - { label: Summary, name: summary, widget: text, required: false }
      - label: Formats (optional)
        name: formats
        widget: list
        required: false
        hint: "Examples: Vinyl LP, CD, Digital."
      - label: Credits (optional)
        name: credits
        widget: list
        required: false
        fields:
          - { label: Role, name: role, widget: string }
          - { label: Name, name: name, widget: string }
  - name: news
    label: News
    label_singular: News Story
    folder: _news
    create: true
    slug: "{{slug}}"
    summary: "{{title}}"
    fields:
      - { label: Layout, name: layout, widget: hidden, default: news }
      - { label: Title, name: title, widget: string }
      - { label: Date, name: date, widget: datetime, format: "YYYY-MM-DD", time_format: false, hint: "Date only (YYYY-MM-DD)." }
      - { label: Section Label, name: section_label, widget: string, required: false, hint: "Optional short tag, e.g. Updates, News." }
      - { label: Summary, name: summary, widget: text, hint: "1â€“2 sentence summary used in cards." }
      - label: Image
        name: image
        widget: image
        media_folder: "/assets/images/news"
        public_folder: "/assets/images/news"
      - { label: Image Description, name: image_alt, widget: string, required: false, hint: "Short alt text for accessibility." }
      - { label: Body, name: body, widget: markdown, hint: "Main story content." }
  - name: data
    label: Site Links
    files:
      - name: navigation
        label: Navigation Menu
        file: _data/nav.yml
        fields:
          - label: Items
            name: items
            widget: list
            fields:
              - { label: Title, name: title, widget: string }
              - { label: URL, name: url, widget: string }
      - name: socials
        label: Social Links
        file: _data/socials.yml
        fields:
          - label: Items
            name: items
            widget: list
            fields:
              - { label: Title, name: title, widget: string }
              - { label: URL, name: url, widget: string }
  - name: artists
    label: Artists
    label_singular: Artist
    folder: _artists
    create: true
    slug: "{{slug}}"
    summary: "{{title}}"
    fields:
      - { label: Layout, name: layout, widget: hidden, default: artist }
      - { label: Artist Name, name: title, widget: string }
      - label: Slug (used in URLs)
        name: slug
        widget: string
        hint: "Lowercase, hyphenated (e.g. mass-culture)."
        pattern:
          [
            "^[a-z]+(?:-[a-z]+)*$",
            "Use lowercase letters and hyphens only."
          ]
      - { label: Genre / Style, name: genre, widget: string }
      - { label: Country, name: country, widget: string, required: false }
      - label: Image
        name: image
        widget: image
        media_folder: "/assets/images/artists"
        public_folder: "/assets/images/artists"
      - { label: Image Description, name: image_alt, widget: string, required: false }
      - { label: Bio, name: bio, widget: text }
      - { label: Upcoming Release (optional), name: upcoming_release, widget: string, required: false }
